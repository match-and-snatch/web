.col-md-12 style="padding-bottom: 15px"
  h2 Subscription Billing Information
  - if @user.has_cc_payment_account?
    .AjaxContainer
      | Card on file is&nbsp;
      strong= @user.card_type
      | &nbsp;ending with <i>**** **** **** <b>#{@user.last_four_cc_numbers}</b></i>
      - if current_user.billing_failed?
        strong style='color: red'  (validation failed)
      a.btn.pink href=edit_cc_data_account_info_path style='margin-top: 15px; display: block;' Update Payment Information
  - else
    .AjaxContainer data-url=edit_cc_data_account_info_path

  hr

  - if @subscriptions.active.any?
    h2 Active Subscriptions

    table.table.table-hover
      thead
        tr
          th
            b Subscription Name
          th style='width: 170px;'
            b Next Billing Date
          th style='width: 170px;'
      tbody
        - @subscriptions.active.each do |subscription|
          tr
            td width='300px'= link_to_user subscription.target_user
            td= subscription.target_user.vacation_enabled? ? 'Away Mode - No Billing' : subscription.billing_date.to_s(:long)
            td style='text-align: right;'
              a.fa.fa-close.AjaxLink href=cancel_subscription_path(subscription.id) Cancel Subscription
  - else
    .well style='text-align:center; margin-bottom: 0'
      |You do not have any active subscriptions.
      '
      a.PopupTrigger data-target='search-users' href='#' Click here to search for subscriptions
      '.

    / This is the section for all canceled subscriptions and any profile that is deleted that once was a subscription.

  - if @contributions.any?
    h2 Active Contributions
    table.table.table-hover
      thead
        tr
          th
            b Contribution Profile
          th style='width: 170px;'
            b Next Billing Date
          th style='width: 170px;'
      tbody
        - @contributions.each do |contribution|
          tr
            td width='300px'= link_to_user contribution.target_user
            td= contribution.next_billing_date.to_s(:long)
            td style='text-align: right;'
              a.fa.fa-close.AjaxLink href=cancel_contribution_path(contribution.id) Cancel Contribution

  - if @subscriptions.canceled.any?
    h2 Canceled Subscriptions

    table.table.table-hover
      tr
        th
          b Subscription Name
        th style='width: 170px;'
          b Canceled Date
        - if @subscriptions.show_failed_column?
          th style='width: 170px;'
            b Status
        th style='width: 170px;'
      - @subscriptions.canceled.each do |subscription|
        tr
          td width='300px'= link_to_user subscription.target_user
          td= subscription.canceled_at.to_s(:long) if subscription.canceled_at
          - if @subscriptions.show_failed_column?
            td
              - if subscription.removed? && subscription.rejected?
                span style='color: gray' Canceled (failed)
              - elsif subscription.removed?
                span style='color: gray' Canceled
              - else
                span style='color: red' Payment failed
          td style='text-align: right;'
            - if subscription.target_user.is_profile_owner?
              span.fa.fa-refresh.pink style='color: #ea2e49' &nbsp;
              a.AjaxFormLink data-_method='PUT' href=restore_subscription_path(subscription.id)
                = subscription.rejected? ? 'Retry Payment' : 'Restore'
              - if !subscription.removed?
                br
                span.fa.fa-times.pink style='color: #ea2e49' &nbsp;
                a.fa.fa-close.AjaxLink href=cancel_subscription_path(subscription.id) Cancel
            - else
              span Deleted Profile
