h2 Banned users

ol.pull-left style='padding: 0 15px 15px 0'
  - @counters.each do |lock_type, count|
    li class="#{lock_type == params[:id] ? 'pending' : ''}"
      a href=admin_ban_path(lock_type)
        span= lock_type.humanize
      small<
        | (#{count})
.clearfix

form.Form action=search_admin_bans_path method='get' data-target='bans'
  input.Autocomplete.form-control type="text" name='q' placeholder="Search users by email"

div data-identifier='bans'

- if @users.any?
  table.table.table-striped style='margin-top: 15px;'
    th
      strong Name
    th
      strong Email
    th style='min-width: 200px'
      strong Locked Date
    th
      strong Lock Type
    th
      strong Lock Reason
    th
    th
    th

    - @users.each do |user|
      tr
        td= dashboard_link_to_user user, truncate: false
        td= user.email
        td= user.last_time_locked_at.try(:to_s, :long)
        td= user.lock_type.to_s.humanize
        td= user.lock_reason.to_s.humanize
        td
          - if user.is_profile_owner?
            button.AjaxFormLink.btn.pink.pull-right data-_method='DELETE' href=delete_profile_page_admin_ban_path(user.id) Delete Profile
          - else
            button.AjaxFormLink.btn.black.pull-right data-_method='POST' href=restore_profile_page_admin_ban_path(user.id) Create Profile
        td
          - if user.not_removed_subscriptions_count > 0
            button.AjaxFormLink.btn.pink.pull-right data-_method='DELETE' href=unsubscribe_admin_ban_path(user.id) Unsubscribe (#{user.not_removed_subscriptions_count})
        td
          button.AjaxFormLink.btn.pink.pull-right data-_method='DELETE' href=admin_ban_path(user.id) Unlock
  .TopJumper= paginate @users
- else
  h3.pending No accounts locked
